{
  "version": 2,
  "version_string": "2.0.0",
  "lifecycle": {
    "status": "active",
    "created_at": "2025-01-15T10:00:00Z",
    "last_updated": "2025-01-15T10:00:00Z"
  },
  "name": "multi_model_code_assistant",
  "description": "A code assistant that uses multiple LLM models with intelligent routing for optimal performance and cost efficiency.",
  "role": "Code Assistant",
  "llm": "openai",
  "llm_settings": {
    "primary_model": {
      "provider": "openai",
      "model": "gpt-4",
      "api_key": "${OPENAI_API_KEY}",
      "endpoint": "https://api.openai.com/v1/chat/completions",
      "temperature": 0.7,
      "max_tokens": 2000
    },
    "fallback_models": [
      {
        "provider": "anthropic",
        "model": "claude-3-opus",
        "priority": 1,
        "trigger_conditions": ["timeout", "rate_limit", "error"],
        "api_key": "${ANTHROPIC_API_KEY}",
        "endpoint": "https://api.anthropic.com/v1/messages"
      },
      {
        "provider": "openai",
        "model": "gpt-3.5-turbo",
        "priority": 2,
        "trigger_conditions": ["timeout", "rate_limit", "error"],
        "api_key": "${OPENAI_API_KEY}",
        "endpoint": "https://api.openai.com/v1/chat/completions"
      }
    ],
    "specialized_models": [
      {
        "name": "code_generation",
        "provider": "openai",
        "model": "gpt-4",
        "task_types": ["code_generation", "code_review", "debugging"],
        "cost_multiplier": 1.5,
        "temperature": 0.2,
        "max_tokens": 4000
      },
      {
        "name": "summarization",
        "provider": "anthropic",
        "model": "claude-3-haiku",
        "task_types": ["summarization", "extraction"],
        "cost_multiplier": 0.5,
        "temperature": 0.5,
        "max_tokens": 1000
      },
      {
        "name": "math",
        "provider": "openai",
        "model": "gpt-4",
        "task_types": ["math", "calculation", "analysis"],
        "cost_multiplier": 1.2,
        "temperature": 0.3,
        "max_tokens": 2000
      }
    ],
    "routing": {
      "strategy": "adaptive",
      "default_model": "primary",
      "task_mappings": {
        "code_generation": "code_generation",
        "code_review": "code_generation",
        "debugging": "code_generation",
        "summarization": "summarization",
        "extraction": "summarization",
        "math": "math",
        "calculation": "math",
        "analysis": "math",
        "general": "primary"
      },
      "factors": {
        "task_complexity": 0.4,
        "cost_budget": 0.3,
        "performance_requirement": 0.3
      },
      "learning_enabled": true,
      "feedback_interval_hours": 24
    },
    "model_constraints": {
      "token_limits": {
        "max_input_tokens": 4000,
        "max_output_tokens": 2000,
        "max_total_tokens": 6000,
        "enforce_strict": true
      },
      "cost_limits": {
        "max_cost_per_task_usd": 2.0,
        "max_cost_per_hour_usd": 20.0,
        "max_cost_per_day_usd": 100.0,
        "alert_threshold_usd": 1.5
      },
      "rate_limits": {
        "max_calls_per_minute": 60,
        "max_calls_per_hour": 1000,
        "max_concurrent_calls": 5,
        "backoff_strategy": "exponential"
      },
      "timeout_limits": {
        "max_inference_time_ms": 30000,
        "max_total_time_ms": 60000,
        "timeout_action": "fallback"
      }
    },
    "model_configuration": {
      "temperature": {
        "default": 0.7,
        "task_specific": {
          "creative": 0.9,
          "analytical": 0.3,
          "code_generation": 0.2,
          "summarization": 0.5
        }
      },
      "top_p": {
        "default": 0.9,
        "task_specific": {
          "creative": 0.95,
          "analytical": 0.8,
          "code_generation": 0.7
        }
      },
      "frequency_penalty": {
        "default": 0.0,
        "task_specific": {
          "creative": 0.5,
          "analytical": 0.0,
          "code_generation": 0.3
        }
      },
      "presence_penalty": {
        "default": 0.0,
        "task_specific": {
          "creative": 0.3,
          "analytical": 0.0,
          "code_generation": 0.1
        }
      }
    },
    "model_monitoring": {
      "enabled": true,
      "metrics": [
        "response_time_ms",
        "tokens_per_second",
        "cost_per_task_usd",
        "success_rate",
        "fallback_rate"
      ],
      "sampling_rate": 0.1
    },
    "quality_monitoring": {
      "enabled": true,
      "metrics": [
        "coherence_score",
        "relevance_score",
        "accuracy_score",
        "user_satisfaction"
      ],
      "feedback_collection": "automatic"
    },
    "alerting": {
      "enabled": true,
      "alerts": [
        {
          "metric": "success_rate",
          "threshold": 0.9,
          "operator": "less_than",
          "channels": ["slack", "email"]
        },
        {
          "metric": "response_time_ms",
          "threshold": 5000,
          "operator": "greater_than",
          "channels": ["slack"]
        },
        {
          "metric": "cost_per_task_usd",
          "threshold": 1.5,
          "operator": "greater_than",
          "channels": ["email"]
        }
      ]
    }
  },
  "tools": [
    {
      "name": "generate_code",
      "description": "Generate code based on requirements and specifications.",
      "category": "development.code_generation",
      "subcategory": "general",
      "parameters": [
        {
          "name": "requirements",
          "type": "string",
          "description": "Code requirements and specifications",
          "minLength": 10,
          "maxLength": 5000,
          "required": true
        },
        {
          "name": "language",
          "type": "string",
          "description": "Programming language",
          "enum": ["python", "javascript", "typescript", "java", "go", "rust"],
          "required": true
        }
      ],
      "returns": {
        "type": "CodeResult",
        "schema": { "$ref": "#/$defs/StandardReturnTypes/CodeResult" },
        "description": "Returns generated code with metadata"
      },
      "invocation": { "type": "python_function" }
    },
    {
      "name": "review_code",
      "description": "Review code for quality, bugs, and best practices.",
      "category": "development.code_review",
      "subcategory": "static_analysis",
      "parameters": [
        {
          "name": "code",
          "type": "string",
          "description": "Code to review",
          "minLength": 1,
          "required": true
        },
        {
          "name": "language",
          "type": "string",
          "description": "Programming language",
          "enum": ["python", "javascript", "typescript", "java", "go", "rust"],
          "required": true
        }
      ],
      "returns": {
        "type": "ReviewResult",
        "schema": { "$ref": "#/$defs/StandardReturnTypes/ReviewResult" },
        "description": "Returns code review with suggestions"
      },
      "invocation": { "type": "python_function" }
    },
    {
      "name": "summarize_documentation",
      "description": "Summarize technical documentation.",
      "category": "analysis.text.summarization",
      "subcategory": "technical",
      "parameters": [
        {
          "name": "documentation",
          "type": "string",
          "description": "Documentation text to summarize",
          "minLength": 100,
          "required": true
        },
        {
          "name": "max_length",
          "type": "integer",
          "description": "Maximum summary length",
          "minimum": 50,
          "maximum": 1000,
          "default": 300
        }
      ],
      "returns": {
        "type": "TextResult",
        "schema": { "$ref": "#/$defs/StandardReturnTypes/TextResult" },
        "description": "Returns summarized documentation"
      },
      "invocation": { "type": "python_function" }
    }
  ],
  "rag": [],
  "memory": {
    "type": "episodic",
    "scope": "session",
    "backend": "sqlite",
    "retention_days": 30,
    "policies": {
      "max_entries": 1000,
      "max_size_mb": 100
    },
    "privacy": {
      "encryption": true,
      "anonymization": false
    }
  },
  "permissions": {
    "file_io": {
      "read": true,
      "write": true,
      "allowed_paths": ["/workspace/*"]
    },
    "network": {
      "enabled": true,
      "allowed_domains": ["api.openai.com", "api.anthropic.com"]
    },
    "env_vars": {
      "allowed": ["OPENAI_API_KEY", "ANTHROPIC_API_KEY"]
    }
  },
  "dependencies": {
    "python": [
      {
        "name": "openai",
        "version": ">=1.0.0"
      },
      {
        "name": "anthropic",
        "version": ">=0.18.0"
      }
    ]
  },
  "governance": {
    "owner": "engineering-team",
    "compliance": ["SOC2", "GDPR"],
    "audit_log": true,
    "change_log": [
      {
        "version": "2.0.0",
        "date": "2025-01-15",
        "changes": [
          "Added LLM extensions with multi-model support",
          "Implemented adaptive routing strategy",
          "Added specialized models for code, summarization, and math",
          "Configured comprehensive monitoring and alerting"
        ]
      }
    ]
  }
}
