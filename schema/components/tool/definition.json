{
  "title": "Tool Definition",
  "type": "object",
  "description": "A callable tool the agent can invoke. Supports both simple RAG tools and rich capability-style tools.",
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "description": "Optional unique identifier for the tool (e.g., UUID)."
    },
    "tool_id": {
      "type": "string",
      "description": "Optional external or catalog ID for this tool."
    },
    "version": {
      "type": "integer",
      "minimum": 1,
      "description": "Optional version number of the tool definition."
    },
    "name": {
      "type": "string",
      "description": "Code-readable tool name used for invocation."
    },
    "display_name": {
      "type": "string",
      "description": "Human-friendly display name for UI surfaces."
    },
    "description": {
      "type": "string",
      "description": "Detailed description of what this tool does and how the agent should use it."
    },
    "category": {
      "type": "string",
      "description": "Optional hierarchical category ID following taxonomy specification (e.g., 'data_access.database.query', 'ai_ml.image_generation.text_to_image').",
      "pattern": "^[a-z_]+(?:\\.[a-z_]+){1,3}$"
    },
    "subcategory": {
      "type": "string",
      "description": "Optional subcategory for specific implementation (e.g., 'sql', 'dalle', 'postgresql').",
      "pattern": "^[a-z0-9_-]+$"
    },
    "parameters": {
      "type": "array",
      "description": "List of parameters this tool accepts.",
      "items": {
        "$ref": "./parameter.json"
      }
    },
    "returns": {
      "type": "object",
      "description": "Optional schema for the tool's return value.",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "description": "Return type category",
          "enum": [
            "ObjectResult",
            "EntityResult",
            "OperationStatus",
            "StringValue",
            "NumberValue",
            "BooleanValue",
            "IdentifierValue",
            "ListResult",
            "BatchResult",
            "FileResult",
            "MediaResult",
            "EventStream",
            "ChunkedData",
            "VoidResult",
            "Custom"
          ]
        },
        "schema": {
          "oneOf": [
            {
              "type": "object"
            },
            {
              "type": "string",
              "format": "uri"
            }
          ],
          "description": "JSON Schema or reference to schema definition"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of the return value"
        },
        "examples": {
          "type": "array",
          "description": "Example return values",
          "items": {}
        },
        "content_type": {
          "type": "string",
          "description": "MIME type of the return value",
          "default": "application/json"
        }
      },
      "required": [
        "type",
        "schema"
      ]
    },
    "dependencies": {
      "type": "array",
      "description": "Optional list of runtime dependencies (e.g., pip packages with optional pinned versions).",
      "items": {
        "type": "string"
      }
    },
    "keys_schema": {
      "type": "array",
      "description": "Optional key / credential schema, typically for environment variables.",
      "items": {
        "$ref": "../common/key-schema.json"
      }
    },
    "sources": {
      "type": "array",
      "description": "Optional list of source references for this tool (e.g., repos, docs).",
      "items": {
        "type": "string"
      }
    },
    "permissions": {
      "type": "object",
      "description": "Optional sandbox permissions for this tool.",
      "additionalProperties": false,
      "properties": {
        "network": {
          "type": "boolean",
          "description": "Whether outbound network access is allowed."
        },
        "file_read": {
          "type": "array",
          "description": "List of directories or paths this tool may read from.",
          "items": {
            "type": "string"
          }
        },
        "file_write": {
          "type": "array",
          "description": "List of directories or paths this tool may write to.",
          "items": {
            "type": "string"
          }
        },
        "env_vars": {
          "type": "array",
          "description": "List of environment variable names this tool may access.",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "visibility": {
      "type": "string",
      "description": "Visibility of this tool, e.g., 'public', 'private'."
    },
    "status": {
      "type": "string",
      "description": "Lifecycle status of this tool, e.g., 'active', 'deprecated'."
    },
    "code_file": {
      "type": "string",
      "description": "Relative path to the Python file implementing this tool."
    },
    "created_by": {
      "type": "string",
      "description": "User or system that created this tool definition."
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO-8601 timestamp of when this tool was created."
    },
    "invocation": {
      "type": "object",
      "description": "Invocation configuration for this tool (how the agent should call it).",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "description": "Invocation type (e.g., 'python_function', 'http_endpoint')."
        },
        "function": {
          "type": "string",
          "description": "Optional function name or entrypoint when type is 'python_function'."
        }
      },
      "required": [
        "type"
      ]
    }
  },
  "required": [
    "name",
    "description",
    "parameters"
  ]
}